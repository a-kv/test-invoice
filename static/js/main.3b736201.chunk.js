(this["webpackJsonptest-invoice"]=this["webpackJsonptest-invoice"]||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},41:function(e,t,n){e.exports=n(75)},46:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),l=n(4),i=(n(46),n(2)),s=(n(26),function(e){return a.createElement("div",{className:"avatar"},a.createElement("img",{alt:"avatar",src:e.avatar_url}),a.createElement("div",null,a.createElement("div",null,e.login)))}),o=function(e){return a.createElement("div",null,e.userData.map((function(e){return a.createElement(s,e)})))},m=n(9),E=a.memo((function(e){return a.createElement("div",{className:"side-bar"},e.isAuth?a.createElement(o,{userData:e.userData}):a.createElement("div",null),a.createElement("div",{className:"links"},a.createElement(m.b,{to:"/terminals"},"Terminals"),a.createElement(m.b,{to:"/buyers"},"Buyers")),console.log("render"),a.createElement("div",{className:"text"},"Copyright \xa9 2020"))})),d=(n(28),n(6)),f=n(12),b=n(19),h=n.n(b),p=h.a.create({baseURL:"https://json-server-invoice.herokuapp.com"}),v=function(e,t,n,a){return p.get("/buyers?_page=".concat(e,"&_limit=").concat(t,"&_order=").concat(a,"&_sort=").concat(n)).then((function(e){return e}))},R=function(e){return p.get("/buyers/".concat(e)).then((function(e){return e}))},g=function(){return p.get("/terminals").then((function(e){return e}))},S=function(e,t){return p.post("/terminals",{title:e,description:t}).then((function(e){return e.data}))},y=function(e){return p.delete("/terminals/".concat(e)).then((function(e){return e}))},N={buyers:[],currentPage:0,pageSize:5,totalCount:15,order:"asc",sortFields:"id"},O=function(e){return{type:"BUYERS_REDUCER/GET_BUYERS",buyers:e}},_=n(39),j=n.n(_),C=(n(71),function(e){var t=Object(d.c)((function(e){return e.buyers.buyers})),n=Object(a.useState)(""),c=Object(l.a)(n,2),u=c[0],i=c[1],s=Object(a.useState)(t),o=Object(l.a)(s,2),E=o[0],f=o[1];return Object(a.useEffect)((function(){f(t.filter((function(e){return e.buyerName.toLowerCase().includes(u.toLowerCase())})))}),[t,u]),r.a.createElement("div",{className:"buyers"},r.a.createElement("div",{className:"titleWrap"},r.a.createElement("div",{className:"title"},"BUYERS"),r.a.createElement("input",{className:"search",type:"text",placeholder:"Search buyer by name...",onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"tableWrap"},r.a.createElement("table",{className:"table",id:"table"},r.a.createElement("tr",null,r.a.createElement("th",null,"Buyer ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"col"},"Average check",r.a.createElement("span",{id:"max",className:"material-icons",onClick:function(){return e.setAverageCheckDesc("averageCheck","desc")}},"filter_list")),r.a.createElement("th",{className:"col"},"Buying",r.a.createElement("span",{id:"max",className:"material-icons",onClick:function(){return e.setNumberOfPurchasesDesc("numberOfPurchases","desc")}},"filter_list")),r.a.createElement("th",{className:"col"},"Total revenue",r.a.createElement("span",{id:"max",className:"material-icons",onClick:function(){return e.setTotalRevenuesDesc("totalRevenues","desc")}},"filter_list"))),E.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(m.b,{to:"/buyers/".concat(e.id)},e.id)),r.a.createElement("td",null,e.buyerName),r.a.createElement("td",null,e.averageCheck," "),r.a.createElement("td",null,e.numberOfPurchases),r.a.createElement("td",null,e.totalRevenues))})))))}),D=function(e){var t=e.isAuth,n=Object(d.c)((function(e){return e.buyers})),c=n.buyers,u=n.totalCount,l=n.currentPage,s=n.pageSize,o=n.order,m=n.sortFields,E=Object(d.b)();if(Object(a.useEffect)((function(){0===c.length&&E(function(e,t,n,a){return function(r){v(e,t,n,a).then((function(e){r(O(e.data))}))}}(l,s,m,o))}),[E,c,l,o,s,m]),!t)return r.a.createElement(i.a,{to:"/"});var f=function(e,t){E(O([])),E(function(e){return{type:"BUYERS_REDUCER/SET_SORT_FIELDS",sortFields:e}}(e)),E(function(e){return{type:"BUYERS_REDUCER/SET_ORDER",order:e}}(t))};return r.a.createElement("div",{className:"buyers"},r.a.createElement("div",{className:"setting"},r.a.createElement("span",null,"Choose page size: "),r.a.createElement("select",{name:"mode",id:"mode",onChange:function(e){return function(e){E(O([])),E(function(e){return{type:"BUYERS_REDUCER/SET_PAGE_SIZE",pageSize:e}}(e))}(+e.target.value)}},r.a.createElement("option",{value:5,selected:!0},"5"),r.a.createElement("option",{value:10},"10"),r.a.createElement("option",{value:15},"15"))),r.a.createElement(C,{setAverageCheckDesc:function(e,t){f(e,t)},setNumberOfPurchasesDesc:function(e,t){f(e,t)},setTotalRevenuesDesc:function(e,t){f(e,t)}}),r.a.createElement(j.a,{totalItemsCount:u,onChange:function(e){E(O([])),E({type:"BUYERS_REDUCER/SET_PAGE",page:e})},activePage:l,itemsCountPerPage:s}))},T=(n(72),n(24)),U=[],A=function(e){var t=e.isAuth,n=Object(a.useState)(""),c=Object(l.a)(n,2),u=c[0],s=c[1],o=Object(a.useState)(""),m=Object(l.a)(o,2),E=m[0],f=m[1],b=Object(d.c)((function(e){return e.terminals})),h=Object(d.b)();Object(a.useEffect)((function(){b&&h((function(e){g().then((function(t){e({type:"TERMINALS_REDUCER/GET_TERMINALS",terminals:t.data})}))}))}),[]);var p=function(e){h(function(e){return function(t){y(e).then((function(n){t(function(e){return{type:"TERMINALS_REDUCER/REMOVE_TERMINAL",id:e}}(e))}))}}(e))};return t?r.a.createElement("div",{className:"terminals"},r.a.createElement("div",{className:"titleWrap"},r.a.createElement("div",{className:"title"}," TERMINALS"),r.a.createElement("div",{className:"setting"},r.a.createElement("input",{type:"terminalName",value:u,onChange:function(e){return s(e.target.value)},placeholder:"Terminal name",required:!0}),r.a.createElement("input",{type:"description",value:E,onChange:function(e){return f(e.target.value)},placeholder:"Description",required:!0}),r.a.createElement("button",{onClick:function(){h(function(e,t){return function(n){S(e,t).then((function(e){n(function(e){return{type:"TERMINALS_REDUCER/ADD_TERMINAL",newTerminal:e}}(e))}))}}(u,E)),s(""),f("")}},"add"))),r.a.createElement("div",{className:"tableWrap"},r.a.createElement("table",{className:"table",id:"table"},r.a.createElement("tr",null,r.a.createElement("th",null,"title"),r.a.createElement("th",null,"description")),b.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.description),r.a.createElement("button",{onClick:function(){p(e.id)}},"delete"))}))))):r.a.createElement(i.a,{to:"/"})},w=(n(73),function(){return r.a.createElement("div",{className:"error"},"Error 404")}),I=(n(74),function(e){var t=Object(a.useState)("a-kv"),n=Object(l.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)("1234QWERasdf"),o=Object(l.a)(s,2),m=o[0],E=o[1],d=Object(a.useState)(""),f=Object(l.a)(d,2),b=f[0],p=f[1],v=Object(a.useState)(""),R=Object(l.a)(v,2),g=R[0],S=R[1];if(e.isAuth)return r.a.createElement(i.a,{to:"/buyers"});var y=function(){var e=/[0-9]/.test(m),t=/[A-Z]/.test(m);if(m.length<8||!e||!t){return S("Password must be more than 8 characters, at least 1 uppercase latin letter and at least 1 numeral...."),!1}return!0};return r.a.createElement("div",{className:"login-wrap"},r.a.createElement("form",{onSubmit:function(t){p(""),S(""),t.preventDefault(),y()&&h.a.get("https://api.github.com/users/".concat(c)).then((function(t){e.onSubmit(t.data),u(""),""!==c&&e.setIsAuth(!0)})).catch((function(t){if(404===t.response.status){p("User does not exist"),e.onSubmit(t.message),e.setIsAuth(!1)}}))},className:"login-form"},r.a.createElement("input",{type:"text",value:c,onChange:function(e){return u(e.target.value)},placeholder:"GitHub username",required:!0}),r.a.createElement("span",{className:"error_message"},b),r.a.createElement("input",{type:"password",value:m,onChange:function(e){return E(e.target.value)},placeholder:"Your password",required:!0}),r.a.createElement("span",{className:"error_message"},g),r.a.createElement("button",{type:"submit"},"Sing in")))}),B=[],k=function(e){var t=e.isAuth,n=Object(d.c)((function(e){return e.buyer})),c=Object(d.b)(),u=Object(i.g)().id;return Object(a.useEffect)((function(){var e=function(e){return function(t){R(e).then((function(e){t({type:"BUYER_REDUCER/GET_BUYER",buyer:e.data})}))}}(u);console.log(e),c(e)}),[]),t?r.a.createElement("div",{className:"buyers-wrap"},r.a.createElement("div",{className:"buyers"},r.a.createElement("div",{className:"title"},"BUYER ID ",n.id),r.a.createElement("table",{className:"table",id:"table"},r.a.createElement("tr",{key:n.id},r.a.createElement("td",null,n.buyerName),r.a.createElement("td",null,n.averageCheck," "),r.a.createElement("td",null,n.numberOfPurchases),r.a.createElement("td",null,n.totalRevenues))))):r.a.createElement(i.a,{to:"/"})},Y=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)([]),s=Object(l.a)(u,2),o=s[0],m=s[1],d=function(e){m(o.concat(e))};return r.a.createElement("div",{className:"App"},r.a.createElement(E,{isAuth:n,userData:o}),r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(){return r.a.createElement(I,{onSubmit:d,isAuth:n,setIsAuth:c})}}),r.a.createElement(i.b,{exact:!0,path:"/buyers",render:function(){return r.a.createElement(D,{isAuth:n})}}),r.a.createElement(i.b,{exact:!0,path:"/buyers/:id",render:function(){return r.a.createElement(k,{isAuth:n})}}),r.a.createElement(i.b,{exact:!0,path:"/terminals",render:function(){return r.a.createElement(A,{isAuth:n})}}),r.a.createElement(i.b,{path:"/*",render:function(){return r.a.createElement(w,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(13),P=n(40),M=Object(L.c)({buyers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUYERS_REDUCER/GET_BUYERS":return Object(f.a)({},e,{buyers:t.buyers});case"BUYERS_REDUCER/SET_PAGE":return Object(f.a)({},e,{currentPage:t.page});case"BUYERS_REDUCER/SET_PAGE_SIZE":return Object(f.a)({},e,{pageSize:t.pageSize});case"BUYERS_REDUCER/SET_ORDER":return Object(f.a)({},e,{order:t.order});case"BUYERS_REDUCER/SET_SORT_FIELDS":return Object(f.a)({},e,{sortFields:t.sortFields});default:return e}},buyer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUYER_REDUCER/GET_BUYER":return t.buyer;default:return e}},terminals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TERMINALS_REDUCER/REMOVE_TERMINAL":return e.filter((function(e){return e.id!=t.id}));case"TERMINALS_REDUCER/ADD_TERMINAL":return[].concat(Object(T.a)(e),[{id:t.newTerminal.id,title:t.newTerminal.title,description:t.newTerminal.description}]);case"TERMINALS_REDUCER/GET_TERMINALS":var n=t.terminals.map((function(e){return Object(f.a)({},e)}));return Object(T.a)(n);default:return e}}}),x=Object(L.d)(M,Object(L.a)(P.a));window.store=x;var G=x;u.a.render(r.a.createElement(m.a,null,r.a.createElement(d.a,{store:G},r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.3b736201.chunk.js.map