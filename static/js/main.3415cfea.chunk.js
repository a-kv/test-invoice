(this["webpackJsonptest-invoice"]=this["webpackJsonptest-invoice"]||[]).push([[0],{26:function(e,t,n){},40:function(e,t,n){e.exports=n(76)},45:function(e,t,n){},50:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),l=n(3),i=(n(45),n(2)),s=(n(26),function(e){return a.createElement("div",{className:"avatar"},a.createElement("img",{alt:"avatar",src:e.avatar_url}),a.createElement("div",null,a.createElement("div",null,e.login)))}),o=function(e){return a.createElement("div",null,e.userData.map((function(e){return a.createElement(s,e)})))},m=n(9),E=a.memo((function(e){return a.createElement("div",{className:"side-bar"},e.isAuth?a.createElement(o,{userData:e.userData}):a.createElement("div",null),a.createElement("div",{className:"links"},a.createElement(m.b,{to:"/terminals"},"Terminals"),a.createElement(m.b,{to:"/buyers"},"Buyers")),console.log("render"),a.createElement("div",{className:"text"},"Copyright \xa9 2020"))})),d=(n(50),n(6)),f=n(12),b=n(19),h=n.n(b),v=h.a.create({baseURL:"https://json-server-invoice.herokuapp.com"}),p=function(e,t,n,a){return v.get("/buyers?_page=".concat(e,"&_limit=").concat(t,"&_order=").concat(a,"&_sort=").concat(n)).then((function(e){return e}))},R=function(e){return v.get("/buyers/".concat(e)).then((function(e){return e}))},g=function(){return v.get("/terminals").then((function(e){return e}))},O=function(e,t){return v.post("/terminals",{title:e,description:t}).then((function(e){return e.data}))},N=function(e){return v.delete("/terminals/".concat(e)).then((function(e){return e}))},S={buyers:[],currentPage:0,pageSize:5,totalCount:15,order:"asc",sortFields:"id"},y=function(e){return{type:"BUYERS_REDUCER/GET_BUYERS",buyers:e}},_=n(38),C=n.n(_),j=(n(71),function(e){var t=Object(d.c)((function(e){return e.buyers.buyers})),n=Object(a.useState)(""),c=Object(l.a)(n,2),u=c[0],i=c[1],s=Object(a.useState)(t),o=Object(l.a)(s,2),E=o[0],f=o[1];return Object(a.useEffect)((function(){f(t.filter((function(e){return e.buyerName.toLowerCase().includes(u.toLowerCase())})))}),[t,u]),r.a.createElement("div",{className:"buyers"},r.a.createElement("div",{className:"titleWrap"},r.a.createElement("div",{className:"title"},"BUYERS"),r.a.createElement("input",{className:"search",type:"text",placeholder:"Search buyer by name...",onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"tableWrap"},r.a.createElement("table",{className:"table",id:"table"},r.a.createElement("tr",null,r.a.createElement("th",null,"Buyer ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"col"},"Average check",e.hiddenIconFlagAverageCheck?r.a.createElement("span",{id:"min",className:"material-icons",onClick:function(){return e.setAverageCheckAsc("averageCheck","asc")}},"filter_list"):r.a.createElement("span",{id:"max",className:"material-icons",onClick:function(){return e.setAverageCheckDesc("averageCheck","desc")}},"filter_list")),r.a.createElement("th",{className:"col"},"Buying",e.hiddenIconFlagNumberOfPurchases?r.a.createElement("span",{id:"min",className:"material-icons",onClick:function(){return e.setNumberOfPurchasesAsc("numberOfPurchases","asc")}},"filter_list"):r.a.createElement("span",{id:"max",className:"material-icons",onClick:function(){return e.setNumberOfPurchasesDesc("numberOfPurchases","desc")}},"filter_list")),r.a.createElement("th",{className:"col"},"Total revenue",e.hiddenIconFlagTotalRevenues?r.a.createElement("span",{id:"min",className:"material-icons",onClick:function(){return e.setTotalRevenuesAsc("totalRevenues","asc")}},"filter_list"):r.a.createElement("span",{id:"max",className:"material-icons",onClick:function(){return e.setTotalRevenuesDesc("totalRevenues","desc")}},"filter_list"))),E.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(m.b,{to:"/buyers/".concat(e.id)},e.id)),r.a.createElement("td",null,e.buyerName),r.a.createElement("td",null,e.averageCheck," "),r.a.createElement("td",null,e.numberOfPurchases),r.a.createElement("td",null,e.totalRevenues))})))))}),A=function(e){var t=e.isAuth,n=Object(d.c)((function(e){return e.buyers})),c=n.buyers,u=n.totalCount,s=n.currentPage,o=n.pageSize,m=n.order,E=n.sortFields,f=Object(d.b)(),b=Object(a.useState)(!1),h=Object(l.a)(b,2),v=h[0],R=h[1],g=Object(a.useState)(!1),O=Object(l.a)(g,2),N=O[0],S=O[1],_=Object(a.useState)(!1),A=Object(l.a)(_,2),T=A[0],D=A[1];if(Object(a.useEffect)((function(){0===c.length&&f(function(e,t,n,a){return function(r){p(e,t,n,a).then((function(e){r(y(e.data))}))}}(s,o,E,m))}),[f,c,s,m,o,E]),!t)return r.a.createElement(i.a,{to:"/"});var U=function(e,t){f(y([])),f(function(e){return{type:"BUYERS_REDUCER/SET_SORT_FIELDS",sortFields:e}}(e)),f(function(e){return{type:"BUYERS_REDUCER/SET_ORDER",order:e}}(t))};return r.a.createElement("div",{className:"buyers"},r.a.createElement("div",{className:"setting"},r.a.createElement("span",null,"Choose page size: "),r.a.createElement("select",{name:"mode",id:"mode",onChange:function(e){return function(e){f(y([])),f(function(e){return{type:"BUYERS_REDUCER/SET_PAGE_SIZE",pageSize:e}}(e))}(+e.target.value)}},r.a.createElement("option",{value:5,selected:!0},"5"),r.a.createElement("option",{value:10},"10"),r.a.createElement("option",{value:15},"15"))),r.a.createElement(j,{setAverageCheckDesc:function(e,t){U(e,t),D(!T)},setNumberOfPurchasesDesc:function(e,t){U(e,t),S(!N)},setTotalRevenuesDesc:function(e,t){U(e,t),R(!v)},setAverageCheckAsc:function(e,t){U(e,t),D(!T)},setNumberOfPurchasesAsc:function(e,t){U(e,t),S(!N)},setTotalRevenuesAsc:function(e,t){U(e,t),R(!v)},hiddenIconFlagAverageCheck:T,hiddenIconFlagNumberOfPurchases:N,hiddenIconFlagTotalRevenues:v}),r.a.createElement(C.a,{totalItemsCount:u,onChange:function(e){f(y([])),f({type:"BUYERS_REDUCER/SET_PAGE",page:e})},activePage:s,itemsCountPerPage:o}))},T=(n(72),n(24)),D=[],U=function(e){var t=e.isAuth,n=Object(a.useState)(""),c=Object(l.a)(n,2),u=c[0],s=c[1],o=Object(a.useState)(""),m=Object(l.a)(o,2),E=m[0],f=m[1],b=Object(d.c)((function(e){return e.terminals})),h=Object(d.b)();Object(a.useEffect)((function(){b&&h((function(e){g().then((function(t){e({type:"TERMINALS_REDUCER/GET_TERMINALS",terminals:t.data})}))}))}),[]);var v=function(e){h(function(e){return function(t){N(e).then((function(n){t(function(e){return{type:"TERMINALS_REDUCER/REMOVE_TERMINAL",id:e}}(e))}))}}(e))};return t?r.a.createElement("div",{className:"terminals"},r.a.createElement("div",{className:"titleWrap"},r.a.createElement("div",{className:"title"}," TERMINALS"),r.a.createElement("div",{className:"setting"},r.a.createElement("input",{type:"terminalName",value:u,onChange:function(e){return s(e.target.value)},placeholder:"Terminal name",required:!0}),r.a.createElement("input",{type:"description",value:E,onChange:function(e){return f(e.target.value)},placeholder:"Description",required:!0}),r.a.createElement("button",{onClick:function(){h(function(e,t){return function(n){O(e,t).then((function(e){n(function(e){return{type:"TERMINALS_REDUCER/ADD_TERMINAL",newTerminal:e}}(e))}))}}(u,E)),s(""),f("")}},"add"))),r.a.createElement("div",{className:"tableWrap"},r.a.createElement("table",{className:"table",id:"table"},r.a.createElement("tr",null,r.a.createElement("th",null,"title"),r.a.createElement("th",null,"description")),b.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.description),r.a.createElement("button",{onClick:function(){v(e.id)}},"delete"))}))))):r.a.createElement(i.a,{to:"/"})},I=(n(73),function(){return r.a.createElement("div",{className:"error"},"Error 404")}),k=(n(74),function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)(""),o=Object(l.a)(s,2),m=o[0],E=o[1],d=Object(a.useState)(""),f=Object(l.a)(d,2),b=f[0],v=f[1],p=Object(a.useState)(""),R=Object(l.a)(p,2),g=R[0],O=R[1];if(e.isAuth)return r.a.createElement(i.a,{to:"/buyers"});var N=function(){var e=/[0-9]/.test(m),t=/[A-Z]/.test(m);if(m.length<8||!e||!t){return O("Password must be more than 8 characters, at least 1 uppercase latin letter and at least 1 numeral...."),!1}return!0};return r.a.createElement("div",{className:"login-wrap"},r.a.createElement("form",{onSubmit:function(t){v(""),O(""),t.preventDefault(),N()&&h.a.get("https://api.github.com/users/".concat(c)).then((function(t){e.onSubmit(t.data),u(""),""!==c&&e.setIsAuth(!0)})).catch((function(t){if(404===t.response.status){v("User does not exist"),e.onSubmit(t.message),e.setIsAuth(!1)}}))},className:"login-form"},r.a.createElement("input",{type:"text",value:c,onChange:function(e){return u(e.target.value)},placeholder:"GitHub username",required:!0}),r.a.createElement("span",{className:"error_message"},b),r.a.createElement("input",{type:"password",value:m,onChange:function(e){return E(e.target.value)},placeholder:"Your password",required:!0}),r.a.createElement("span",{className:"error_message"},g),r.a.createElement("button",{type:"submit"},"Sing in")))}),w=(n(75),[]),B=function(e){var t=e.isAuth,n=Object(d.c)((function(e){return e.buyer})),c=Object(d.b)(),u=Object(i.g)().id;return Object(a.useEffect)((function(){var e=function(e){return function(t){R(e).then((function(e){t({type:"BUYER_REDUCER/GET_BUYER",buyer:e.data})}))}}(u);console.log(e),c(e)}),[]),t?r.a.createElement("div",{className:"buyer"},r.a.createElement("div",{className:"title"},"BUYER ID ",n.id),r.a.createElement("table",{className:"table",id:"table"},r.a.createElement("tr",{key:n.id},r.a.createElement("td",null,n.buyerName),r.a.createElement("td",null,n.averageCheck," "),r.a.createElement("td",null,n.numberOfPurchases),r.a.createElement("td",null,n.totalRevenues)))):r.a.createElement(i.a,{to:"/"})},P=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)([]),s=Object(l.a)(u,2),o=s[0],m=s[1],d=function(e){m(o.concat(e))};return r.a.createElement("div",{className:"App"},r.a.createElement(E,{isAuth:n,userData:o}),r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(){return r.a.createElement(k,{onSubmit:d,isAuth:n,setIsAuth:c})}}),r.a.createElement(i.b,{exact:!0,path:"/buyers",render:function(){return r.a.createElement(A,{isAuth:n})}}),r.a.createElement(i.b,{exact:!0,path:"/buyers/:id",render:function(){return r.a.createElement(B,{isAuth:n})}}),r.a.createElement(i.b,{exact:!0,path:"/terminals",render:function(){return r.a.createElement(U,{isAuth:n})}}),r.a.createElement(i.b,{path:"/*",render:function(){return r.a.createElement(I,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(13),L=n(39),M=Object(Y.c)({buyers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUYERS_REDUCER/GET_BUYERS":return Object(f.a)({},e,{buyers:t.buyers});case"BUYERS_REDUCER/SET_PAGE":return Object(f.a)({},e,{currentPage:t.page});case"BUYERS_REDUCER/SET_PAGE_SIZE":return Object(f.a)({},e,{pageSize:t.pageSize});case"BUYERS_REDUCER/SET_ORDER":return Object(f.a)({},e,{order:t.order});case"BUYERS_REDUCER/SET_SORT_FIELDS":return Object(f.a)({},e,{sortFields:t.sortFields});default:return e}},buyer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUYER_REDUCER/GET_BUYER":return t.buyer;default:return e}},terminals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TERMINALS_REDUCER/REMOVE_TERMINAL":return e.filter((function(e){return e.id!=t.id}));case"TERMINALS_REDUCER/ADD_TERMINAL":return[].concat(Object(T.a)(e),[{id:t.newTerminal.id,title:t.newTerminal.title,description:t.newTerminal.description}]);case"TERMINALS_REDUCER/GET_TERMINALS":var n=t.terminals.map((function(e){return Object(f.a)({},e)}));return Object(T.a)(n);default:return e}}}),F=Object(Y.d)(M,Object(Y.a)(L.a));window.store=F;var x=F;u.a.render(r.a.createElement(m.a,null,r.a.createElement(d.a,{store:x},r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.3415cfea.chunk.js.map